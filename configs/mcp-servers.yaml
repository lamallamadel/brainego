# MCP Server Registry Configuration
# Defines available MCP servers and their connection details

servers:
  mcp-github:
    name: "GitHub MCP Server"
    description: "Access GitHub repositories, issues, PRs, and code"
    type: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-github"
    env:
      GITHUB_TOKEN: "${GITHUB_TOKEN}"
    capabilities:
      - "resources"
      - "tools"
      - "prompts"
    resources:
      - "repositories"
      - "issues"
      - "pull_requests"
      - "commits"
      - "code_search"
    tools:
      - "github_search_repositories"
      - "github_get_repository"
      - "github_list_issues"
      - "github_create_issue"
      - "github_get_issue"
      - "github_list_pull_requests"
      - "github_get_pull_request"
      - "github_search_code"
      - "github_get_file_contents"
    enabled: true
    timeout: 30
    max_retries: 3
    security:
      # Restrict MCP GitHub access to test repositories only.
      # Comma-separated values are resolved by the operator from .env.mcpjungle.
      allowed_repositories:
        - "${GITHUB_TEST_OWNER}/${GITHUB_TEST_REPO_1}"
        - "${GITHUB_TEST_OWNER}/${GITHUB_TEST_REPO_2}"
      allowed_owners:
        - "${GITHUB_TEST_OWNER}"
      denied_operations:
        - "delete"
        - "admin"

  mcp-notion:
    name: "Notion MCP Server"
    description: "Access Notion databases, pages, and blocks"
    type: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-notion"
    env:
      NOTION_API_KEY: "${NOTION_API_KEY}"
    capabilities:
      - "resources"
      - "tools"
    resources:
      - "databases"
      - "pages"
      - "blocks"
    tools:
      - "notion_search"
      - "notion_get_page"
      - "notion_create_page"
      - "notion_update_page"
      - "notion_get_database"
      - "notion_query_database"
      - "notion_get_block_children"
      - "notion_append_block_children"
    enabled: true
    timeout: 30
    max_retries: 3
    security:
      # Restrict MCP Notion access to a dedicated test workspace and test databases.
      allowed_workspace_ids:
        - "${NOTION_TEST_WORKSPACE_ID}"
      allowed_database_ids:
        - "${NOTION_TEST_DATABASE_ID_1}"
        - "${NOTION_TEST_DATABASE_ID_2}"
      denied_operations:
        - "delete"

  mcp-filesystem:
    name: "Filesystem MCP Server"
    description: "Access and manipulate filesystem with controlled permissions"
    type: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-filesystem"
      - "/workspace"
    env: {}
    capabilities:
      - "resources"
      - "tools"
    resources:
      - "files"
      - "directories"
    tools:
      - "read_file"
      - "write_file"
      - "list_directory"
      - "create_directory"
      - "delete_file"
      - "move_file"
      - "search_files"
      - "get_file_info"
    enabled: true
    timeout: 30
    max_retries: 3
    security:
      allowed_paths:
        - "/workspace"
      blocked_paths:
        - "/workspace/.git"
        - "/workspace/.env"
      max_file_size_mb: 10

  mcp-slack:
    name: "Slack MCP Server"
    description: "Access Slack channels, messages, and workspace data"
    type: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-slack"
    env:
      SLACK_BOT_TOKEN: "${SLACK_BOT_TOKEN}"
    capabilities:
      - "resources"
      - "tools"
    resources:
      - "channels"
      - "messages"
      - "users"
    tools:
      - "slack_list_channels"
      - "slack_get_channel_history"
      - "slack_post_message"
      - "slack_search_messages"
      - "slack_list_users"
      - "slack_get_user_info"
      - "slack_upload_file"
      - "slack_add_reaction"
    enabled: true
    timeout: 30
    max_retries: 3

  mcp-gmail:
    name: "Gmail MCP Server"
    description: "Read-only access to Gmail messages and threads"
    type: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-gmail"
    env:
      GMAIL_CLIENT_ID: "${GMAIL_CLIENT_ID}"
      GMAIL_CLIENT_SECRET: "${GMAIL_CLIENT_SECRET}"
      GMAIL_REFRESH_TOKEN: "${GMAIL_REFRESH_TOKEN}"
    capabilities:
      - "resources"
      - "tools"
    resources:
      - "messages"
      - "threads"
      - "labels"
    tools:
      - "gmail_list_messages"
      - "gmail_get_message"
      - "gmail_search_messages"
      - "gmail_get_thread"
      - "gmail_list_labels"
      - "gmail_get_profile"
    enabled: true
    timeout: 30
    max_retries: 3
    security:
      read_only: true
      allowed_operations:
        - "read"
        - "search"
        - "list"

  mcp-calendar:
    name: "Google Calendar MCP Server"
    description: "Access Google Calendar events and calendars"
    type: "stdio"
    command: "npx"
    args:
      - "-y"
      - "@modelcontextprotocol/server-google-calendar"
    env:
      GOOGLE_CALENDAR_CLIENT_ID: "${GOOGLE_CALENDAR_CLIENT_ID}"
      GOOGLE_CALENDAR_CLIENT_SECRET: "${GOOGLE_CALENDAR_CLIENT_SECRET}"
      GOOGLE_CALENDAR_REFRESH_TOKEN: "${GOOGLE_CALENDAR_REFRESH_TOKEN}"
    capabilities:
      - "resources"
      - "tools"
    resources:
      - "calendars"
      - "events"
    tools:
      - "calendar_list_calendars"
      - "calendar_get_calendar"
      - "calendar_list_events"
      - "calendar_get_event"
      - "calendar_create_event"
      - "calendar_update_event"
      - "calendar_delete_event"
      - "calendar_search_events"
    enabled: true
    timeout: 30
    max_retries: 3

# Global MCP Configuration
settings:
  default_timeout: 30
  max_concurrent_requests: 10
  enable_caching: true
  cache_ttl_seconds: 300
  log_requests: true
  log_responses: false
