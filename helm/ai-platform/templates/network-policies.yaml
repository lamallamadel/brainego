{{- if .Values.networkPolicies.enabled -}}
# Default Deny All Ingress Policy for namespace isolation
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all-ingress
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: default-deny-all-ingress
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector: {}
  policyTypes:
    - Ingress
---
# Default Deny All Egress Policy for namespace isolation
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all-egress
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: default-deny-all-egress
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector: {}
  policyTypes:
    - Egress
---
# Allow DNS for all pods
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-dns-access
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: allow-dns-access
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector: {}
  policyTypes:
    - Egress
  egress:
    - to:
        - namespaceSelector:
            matchLabels:
              name: kube-system
      ports:
        - protocol: UDP
          port: 53
        - protocol: TCP
          port: 53
---
{{- if .Values.gateway.enabled }}
# Gateway Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: gateway-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: gateway-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: gateway
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow external traffic
    - from:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: {{ .Values.gateway.service.targetPort }}
    # Allow from Kong ingress if enabled
    {{- if .Values.kong.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: kong
      ports:
        - protocol: TCP
          port: {{ .Values.gateway.service.targetPort }}
    {{- end }}
  egress:
    # Allow to agent-router
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.agentRouter.service.targetPort }}
    # Allow to MAX Serve instances
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: inference
      ports:
        - protocol: TCP
          port: 8080
        - protocol: TCP
          port: 8081
        - protocol: TCP
          port: 8082
    # Allow to Qdrant
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: qdrant
      ports:
        - protocol: TCP
          port: {{ .Values.qdrant.service.port }}
    # Allow to Redis
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: redis
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
{{- end }}
---
{{- if .Values.agentRouter.enabled }}
# Agent Router Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: agent-router-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: agent-router-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: agent-router
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow from gateway
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: gateway
      ports:
        - protocol: TCP
          port: {{ .Values.agentRouter.service.targetPort }}
    # Allow from MCPJungle
    {{- if .Values.mcpjungle.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: mcpjungle
      ports:
        - protocol: TCP
          port: {{ .Values.agentRouter.service.targetPort }}
    {{- end }}
    # Allow Prometheus scraping
    {{- if .Values.prometheus.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: prometheus
      ports:
        - protocol: TCP
          port: {{ .Values.agentRouter.service.metricsPort }}
    {{- end }}
  egress:
    # Allow to MAX Serve instances
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: inference
      ports:
        - protocol: TCP
          port: 8080
        - protocol: TCP
          port: 8081
        - protocol: TCP
          port: 8082
    # Allow to Qdrant
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: qdrant
      ports:
        - protocol: TCP
          port: {{ .Values.qdrant.service.port }}
        - protocol: TCP
          port: {{ .Values.qdrant.service.grpcPort }}
    # Allow to Redis
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: redis
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
    # Allow to Neo4j
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: neo4j
      ports:
        - protocol: TCP
          port: {{ .Values.neo4j.service.boltPort }}
    # Allow to PostgreSQL
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: postgres
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
{{- end }}
---
{{- if .Values.mcpjungle.enabled }}
# MCPJungle Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: mcpjungle-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: mcpjungle-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: mcpjungle
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow external traffic
    - from:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: {{ .Values.mcpjungle.service.targetPort }}
  egress:
    # Allow to agent-router
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.agentRouter.service.targetPort }}
    # Allow to Qdrant
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: qdrant
      ports:
        - protocol: TCP
          port: {{ .Values.qdrant.service.port }}
    # Allow to Redis
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: redis
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
    # Allow to Jaeger for telemetry
    {{- if .Values.jaeger.enabled }}
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: jaeger
      ports:
        - protocol: TCP
          port: {{ .Values.jaeger.service.otlpGrpcPort }}
        - protocol: UDP
          port: {{ .Values.jaeger.service.agentUdpPort }}
    {{- end }}
    # Allow external API calls (GitHub, Notion, etc.)
    - to:
        - namespaceSelector: {}
      ports:
        - protocol: TCP
          port: 443
        - protocol: TCP
          port: 80
{{- end }}
---
# MAX Serve Llama Network Policy
{{- if .Values.maxServeLlama.enabled }}
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: max-serve-llama-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: max-serve-llama-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: max-serve-llama
  policyTypes:
    - Ingress
  ingress:
    # Allow from gateway
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: gateway
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeLlama.service.targetPort }}
    # Allow from agent-router
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeLlama.service.targetPort }}
    # Allow from learning engine
    {{- if .Values.learningEngine.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: learning-engine
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeLlama.service.targetPort }}
    {{- end }}
    # Allow Prometheus scraping
    {{- if .Values.prometheus.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: prometheus
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeLlama.service.targetPort }}
    {{- end }}
{{- end }}
---
# MAX Serve Qwen Network Policy
{{- if .Values.maxServeQwen.enabled }}
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: max-serve-qwen-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: max-serve-qwen-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: max-serve-qwen
  policyTypes:
    - Ingress
  ingress:
    # Allow from gateway
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: gateway
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeQwen.service.targetPort }}
    # Allow from agent-router
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeQwen.service.targetPort }}
    # Allow Prometheus scraping
    {{- if .Values.prometheus.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: prometheus
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeQwen.service.targetPort }}
    {{- end }}
{{- end }}
---
# MAX Serve DeepSeek Network Policy
{{- if .Values.maxServeDeepseek.enabled }}
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: max-serve-deepseek-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: max-serve-deepseek-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: max-serve-deepseek
  policyTypes:
    - Ingress
  ingress:
    # Allow from gateway
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: gateway
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeDeepseek.service.targetPort }}
    # Allow from agent-router
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeDeepseek.service.targetPort }}
    # Allow Prometheus scraping
    {{- if .Values.prometheus.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: prometheus
      ports:
        - protocol: TCP
          port: {{ .Values.maxServeDeepseek.service.targetPort }}
    {{- end }}
{{- end }}
---
{{- if .Values.learningEngine.enabled }}
# Learning Engine Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: learning-engine-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: learning-engine-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: learning-engine
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow from drift-monitor if enabled
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: monitoring
      ports:
        - protocol: TCP
          port: {{ .Values.learningEngine.service.targetPort }}
  egress:
    # Allow to PostgreSQL
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: postgres
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    # Allow to MinIO
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: minio
      ports:
        - protocol: TCP
          port: {{ .Values.minio.service.apiPort }}
    # Allow to MAX Serve for inference
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: inference
      ports:
        - protocol: TCP
          port: 8080
{{- end }}
---
{{- if .Values.mem0.enabled }}
# Mem0 Service Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: mem0-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: mem0-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: mem0
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow from agent-router
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.mem0.service.targetPort }}
  egress:
    # Allow to Qdrant
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: qdrant
      ports:
        - protocol: TCP
          port: {{ .Values.qdrant.service.port }}
    # Allow to Redis
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: redis
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
{{- end }}
---
{{- if .Values.qdrant.enabled }}
# Qdrant Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: qdrant-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: qdrant-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: qdrant
  policyTypes:
    - Ingress
  ingress:
    # Allow from all API pods
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: api
      ports:
        - protocol: TCP
          port: {{ .Values.qdrant.service.port }}
        - protocol: TCP
          port: {{ .Values.qdrant.service.grpcPort }}
    # Allow from mem0
    {{- if .Values.mem0.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: mem0
      ports:
        - protocol: TCP
          port: {{ .Values.qdrant.service.port }}
    {{- end }}
{{- end }}
---
{{- if .Values.redis.enabled }}
# Redis Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: redis-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: redis-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: redis
  policyTypes:
    - Ingress
  ingress:
    # Allow from all API pods
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: api
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
    # Allow from mem0
    {{- if .Values.mem0.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: mem0
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
    {{- end }}
    # Allow from Kong if enabled
    {{- if .Values.kong.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: kong
      ports:
        - protocol: TCP
          port: {{ .Values.redis.service.port }}
    {{- end }}
{{- end }}
---
{{- if .Values.postgres.enabled }}
# PostgreSQL Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: postgres-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: postgres-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: postgres
  policyTypes:
    - Ingress
  ingress:
    # Allow from agent-router
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    # Allow from learning engine
    {{- if .Values.learningEngine.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: learning-engine
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    {{- end }}
    # Allow from monitoring components
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: monitoring
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    # Allow from Kong if enabled
    {{- if .Values.kong.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: kong
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    {{- end }}
    # Allow from Grafana
    {{- if .Values.grafana.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: grafana
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    {{- end }}
{{- end }}
---
{{- if .Values.neo4j.enabled }}
# Neo4j Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: neo4j-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: neo4j-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: neo4j
  policyTypes:
    - Ingress
  ingress:
    # Allow from agent-router
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: agent-router
      ports:
        - protocol: TCP
          port: {{ .Values.neo4j.service.boltPort }}
        - protocol: TCP
          port: {{ .Values.neo4j.service.httpPort }}
{{- end }}
---
{{- if .Values.minio.enabled }}
# MinIO Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: minio-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: minio-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: minio
  policyTypes:
    - Ingress
  ingress:
    # Allow from learning engine
    {{- if .Values.learningEngine.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: learning-engine
      ports:
        - protocol: TCP
          port: {{ .Values.minio.service.apiPort }}
        - protocol: TCP
          port: {{ .Values.minio.service.consolePort }}
    {{- end }}
{{- end }}
---
{{- if .Values.jaeger.enabled }}
# Jaeger Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: jaeger-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: jaeger-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: jaeger
  policyTypes:
    - Ingress
  ingress:
    # Allow from MCPJungle for telemetry
    {{- if .Values.mcpjungle.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: mcpjungle
      ports:
        - protocol: TCP
          port: {{ .Values.jaeger.service.otlpGrpcPort }}
        - protocol: UDP
          port: {{ .Values.jaeger.service.agentUdpPort }}
    {{- end }}
    # Allow UI access
    - from:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: {{ .Values.jaeger.service.queryPort }}
{{- end }}
---
{{- if .Values.prometheus.enabled }}
# Prometheus Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: prometheus-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: prometheus-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: prometheus
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow from Grafana
    {{- if .Values.grafana.enabled }}
    - from:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: grafana
      ports:
        - protocol: TCP
          port: {{ .Values.prometheus.service.port }}
    {{- end }}
    # Allow UI access
    - from:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: {{ .Values.prometheus.service.port }}
  egress:
    # Allow scraping all pods with metrics
    - to:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: 8000
        - protocol: TCP
          port: 8001
        - protocol: TCP
          port: 8080
        - protocol: TCP
          port: 8081
        - protocol: TCP
          port: 8082
{{- end }}
---
{{- if .Values.grafana.enabled }}
# Grafana Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: grafana-network-policy
  namespace: {{ .Values.namespace.name }}
  labels:
    app.kubernetes.io/name: grafana-network-policy
    app.kubernetes.io/component: security
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
  policyTypes:
    - Ingress
    - Egress
  ingress:
    # Allow external access
    - from:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: {{ .Values.grafana.service.port }}
  egress:
    # Allow to Prometheus
    {{- if .Values.prometheus.enabled }}
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: prometheus
      ports:
        - protocol: TCP
          port: {{ .Values.prometheus.service.port }}
    {{- end }}
    # Allow to PostgreSQL
    {{- if .Values.postgres.enabled }}
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: postgres
      ports:
        - protocol: TCP
          port: {{ .Values.postgres.service.port }}
    {{- end }}
{{- end }}
{{- end }}
